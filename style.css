/* ====== Base ====== */
:root{
  --bg:#0f1014;
  --panel: rgba(0,0,0,.55);
  --panel-border: rgba(255,255,255,.08);
  --text:#f3f4f7;
  --muted:#c8cbd4;
  --accent:#7A2CF0;        /* Zeeni purple */
  --accent-2:#00C7B7;      /* Zeeni teal */
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  background:var(--bg);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ====== App Shell ====== */
#app{height:100%;position:relative}
#bg{
  position:fixed; inset:0; z-index:0;
  background:#101119; background-size:cover; background-position:center;
}
.viewer-wrap{
  position:relative; z-index:1;
  height:100%;
  padding:80px 16px 86px;            /* space for top & bottom bars */
  display:grid; place-items:center;
}
#book{
  width:min(92vw, 1280px);
  height:calc(min(92vw,1280px) * 0.707); /* 16:11ish; corrected by JS after first render */
  max-height:calc(100vh - 180px);
  background:transparent;
}

/* ====== Top Toolbar ====== */
.toolbar{
  position:fixed; z-index:5; top:12px; left:50%; transform:translateX(-50%);
  display:flex; align-items:center; gap:10px;
  padding:8px 10px; border-radius:12px;
  background:var(--panel); backdrop-filter:blur(8px);
  border:1px solid var(--panel-border);
  box-shadow:0 8px 24px rgba(0,0,0,.25);
}
.toolbar .btn{
  appearance:none; border:1px solid var(--panel-border);
  background:#1b1e27; color:var(--text);
  padding:8px 10px; border-radius:10px; cursor:pointer;
  transition:transform .08s ease, background .15s ease, border-color .15s ease;
}
.toolbar .btn:hover{ background:#222634; border-color:rgba(255,255,255,.15)}
.toolbar .btn:active{ transform:scale(.98) }
.toolbar .split{ width:1px; height:28px; background:var(--panel-border); margin:0 4px}

/* ====== Bottom Chrome (scrubber + zoom like Issuu) ====== */
.chrome{
  position:fixed; z-index:5; left:50%; bottom:12px; transform:translateX(-50%);
  width:min(1000px, 92vw);
  display:grid; grid-template-columns:1fr auto auto; align-items:center; gap:10px;
  padding:10px 12px; border-radius:12px;
  background:var(--panel); border:1px solid var(--panel-border);
  backdrop-filter:blur(8px);
}
.scrub{
  display:flex; align-items:center; gap:10px;
}
.scrub input[type="range"]{
  -webkit-appearance:none; width:100%; height:6px; border-radius:999px;
  background:linear-gradient(90deg, var(--accent), var(--accent-2));
  outline:none; opacity:.95;
}
.scrub input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; width:18px; height:18px; border-radius:50%;
  background:#fff; border:2px solid #0d0f16; box-shadow:0 2px 8px rgba(0,0,0,.35);
}
.counter{ color:var(--muted); font-variant-numeric:tabular-nums }
.zoom{
  display:flex; gap:8px;
}
.zoom .btn{ padding:8px 12px }

/* ====== Thumbnails Panel (toggleable) ====== */
.thumbs{
  position:fixed; z-index:4; right:12px; top:72px; bottom:92px;
  width:min(220px, 42vw); overflow:auto; padding:10px;
  background:var(--panel); border:1px solid var(--panel-border);
  border-radius:12px; backdrop-filter:blur(8px);
}
.thumb{
  width:100%; aspect-ratio:3/4; margin:0 0 10px; border-radius:8px; overflow:hidden;
  border:1px solid var(--panel-border); cursor:pointer; position:relative;
}
.thumb img{ width:100%; height:100%; object-fit:cover; display:block }
.thumb.active::after{
  content:""; position:absolute; inset:0;
  border:2px solid var(--accent); border-radius:8px; pointer-events:none;
}
.hide{ display:none }

/* ====== Loading Overlay ====== */
#loading{
  position:fixed; inset:0; z-index:6; display:grid; place-items:center;
  background:rgba(0,0,0,.35); color:#fff; font-size:18px;
}
.hidden{ display:none }

/* ====== Watermark on free tier ====== */
#watermark{
  position:fixed; inset:0; z-index:2; pointer-events:none;
  display:grid; place-items:center; text-transform:uppercase;
  color:rgba(255,255,255,.25); font-weight:700; letter-spacing:.08em;
  background-image:
    repeating-linear-gradient(45deg, rgba(255,255,255,.06) 0 40px, transparent 40px 80px);
}

/* ====== Page visual polish (edges, paper feel) ====== */
/* Works with StPageFlip images inside #book */
#book .page{
  position:relative;
  background: #fafafc;
}
#book .page::before, #book .page::after{
  content:""; position:absolute; top:0; bottom:0; width:16px; pointer-events:none;
}
#book .page::before{ left:0; background:linear-gradient(90deg, rgba(0,0,0,.18), rgba(0,0,0,0)); }
#book .page::after{ right:0; background:linear-gradient(270deg, rgba(0,0,0,.18), rgba(0,0,0,0)); }

/* ====== Fullscreen ====== */
:fullscreen .toolbar,
:fullscreen .chrome,
:fullscreen .thumbs{ background:rgba(0,0,0,.35) }

/* ====== Responsive tweaks ====== */
@media (max-width: 1024px){
  .viewer-wrap{ padding:64px 8px 96px }
  #book{ width:96vw; max-height:calc(100vh - 160px) }
  .thumbs{ display:none }              /* hide thumbs on small screens */
  .chrome{ grid-template-columns:1fr auto; }
}
